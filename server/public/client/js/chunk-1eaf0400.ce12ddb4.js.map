{"version":3,"sources":["webpack:///./src/pages/catalog/index.vue?06e1","webpack:///./src/pages/catalog/map.vue?b8a0","webpack:///./src/pages/catalog/list.vue?ecc1","webpack:///./src/assets/icons/ui/empty.svg?a07e","webpack:///./src/pages/catalog/index.vue","webpack:///./src/pages/catalog/list.vue","webpack:///./src/pages/catalog/list.vue?3722","webpack:///./src/pages/catalog/map.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","webpack:///./src/pages/catalog/map.vue?51bc","webpack:///./src/pages/catalog/index.vue?e1b7"],"names":["module","exports","$route","$store","sort","props","complexes","Array","data","text","value","key","dir","methods","setSort","this","filter","dispatch","computed","state","catalog","components","iComplex","__exports__","rendered","opened","hover","mapOptions","mapIcon","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","isArray","unsupportedIterableToArray","length","i","F","s","n","done","e","_e","f","TypeError","err","normalCompletion","didErr","call","step","next","_e2","mounted","$gmapApiPromiseLazy","api","maps","$refs","map","$mapPromise","fitBounds","zoomControl","mapTypeControl","scaleControl","streetViewControl","rotateControl","gestureHandling","styles","url","scaledSize","width","height","labelOrigin","x","y","clusterOptions","clusterClass","watch","bounds","LatLngBounds","complex","extend","LatLng","coordinates","lat","lng","getZoom","setZoom","redraw_complexes","getBounds","console","log","Qa","h","j","ub","beforeRouteEnter","to","from","vm","setFilter","beforeRouteUpdate","name","beforeUnmount","view","selection_id","String","Number","load","routeOptions","query","bedrooms","deadline","choosen","class","JSON","parse","area","values","parseInt","min","max","price","sort_key","sort_dir","search","selection","loaded","selections","find","item","cFilter","lList","lMap","render"],"mappings":"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","file":"js/chunk-1eaf0400.ce12ddb4.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--12-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--12-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--12-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--12-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=a37d0eb4&lang=stylus&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--12-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--12-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--12-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--12-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./map.vue?vue&type=style&index=0&id=03c79823&lang=stylus&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--12-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--12-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--12-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--12-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./list.vue?vue&type=style&index=0&id=1fb3f7a8&lang=stylus&scoped=true\"","module.exports = __webpack_public_path__ + \"img/empty.79327d79.svg\";","<template lang=\"pug\">\r\n\r\n.catalog\r\n    .selection-title(v-if=\"selection\") {{ selection.name }}\r\n        router-link.close(:to=\"{ name: 'catalog', query: { ...$route.query } }\")\r\n            g-icon(name=\"ui/close\")\r\n\r\n    c-filter(:is_catalog=\"true\" @load=\"load\")\r\n    l-list(v-if=\"filter.view == 'list'\" :complexes=\"$store.state.catalog.complexes\")\r\n    l-map(v-if=\"filter.view == 'map'\" :complexes=\"$store.state.catalog.complexes\")\r\n\r\n</template>\r\n<script>\r\nimport cFilter from 'components/filter'\r\nimport lList from './list'\r\nimport lMap from './map'\r\nexport default {\r\n    async beforeRouteEnter(to, from, next) {\r\n        await next(async (vm) => {\r\n            await vm.setFilter()\r\n        })\r\n    },\r\n    async beforeRouteUpdate(to, from) {\r\n        if (to.name != from.name)\r\n            await this.setFilter()\r\n    },\r\n    beforeUnmount() {\r\n        this.$store.state.catalog.filter.view = 'list'\r\n    },\r\n    props: {\r\n        selection_id: [String, Number]\r\n    },\r\n    data: () => ({\r\n    }),\r\n    methods: {\r\n        async load() {\r\n            await this.$store.dispatch('catalog/filter')\r\n        },\r\n        async setFilter() {\r\n            let filter = this.$store.state.catalog.filter\r\n        \r\n            let routeOptions = this.$route.query\r\n            console.log('route', routeOptions)\r\n            \r\n            if (routeOptions.bedrooms)\r\n                filter.bedrooms = typeof routeOptions.bedrooms === 'string' ? [routeOptions.bedrooms] : routeOptions.bedrooms\r\n            if (routeOptions.deadline)\r\n                filter.deadline.choosen = typeof routeOptions.deadline === 'string' ? [routeOptions.deadline] : routeOptions.deadline\r\n            if (routeOptions.class)\r\n                filter.class.choosen = typeof routeOptions.class === 'string' ? [routeOptions.class] : routeOptions.class\r\n            if (routeOptions.done)\r\n                filter.done = JSON.parse(routeOptions.done)\r\n            if (routeOptions.area)\r\n                filter.area.values = [parseInt(routeOptions.area[0]), parseInt(routeOptions.area[1])]\r\n            else\r\n                filter.area.values = [filter.area.min, filter.area.max]\r\n            if (routeOptions.price)\r\n                filter.price.values = [parseInt(routeOptions.price[0]), parseInt(routeOptions.price[1])]\r\n            else\r\n                filter.price.values = [filter.price.min, filter.price.max]\r\n\r\n            filter.sort.key = routeOptions.sort_key || filter.sort.key\r\n            filter.sort.dir = routeOptions.sort_dir || filter.sort.dir\r\n\r\n            filter.search = routeOptions.search || filter.search\r\n            filter.view = routeOptions.view || filter.view\r\n            filter.selection = this.selection_id\r\n\r\n            filter.loaded = true\r\n\r\n            await this.$store.dispatch('catalog/filter')\r\n        }\r\n    },\r\n    computed: {\r\n        filter() {\r\n            return this.$store.state.catalog.filter\r\n        },\r\n        selection() {\r\n            return this.selection_id ? this.$store.state.catalog.selections.find(item => item.key == this.selection_id) : null\r\n        }\r\n    },\r\n    components: { cFilter, lList, lMap }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n\r\n.selection-title\r\n    width $desktop-width\r\n    margin 10px auto 25px\r\n    $h2()\r\n    display flex\r\n    align-items center\r\n    .close\r\n        font-size 20px\r\n        cursor pointer\r\n        margin-left 14px\r\n        display flex\r\n        align-items center\r\n        justify-content center\r\n        background-color $gray2\r\n        // color #fff\r\n        width 30px\r\n        height 30px\r\n        border-radius 100%\r\n    +$phone()\r\n        padding 0 16px\r\n        margin-bottom 15px\r\n        margin-top 15px\r\n        .close\r\n            width 24px\r\n            height 24px\r\n            font-size 18px\r\n            margin-left 10px\r\n\r\n.catalog\r\n    padding-top 20px\r\n    +$tablet()\r\n        padding-top 0\r\n\r\n</style>\r\n","<template lang=\"pug\">\r\n\r\n.sort\r\n    .label Сортировать:\r\n    \r\n    .sort-item(v-for=\"(item, index) in sort\" :key=\"index\" @click=\"setSort(item.value)\" :class=\"{ active: item.value.key == filter.sort.key, down: filter.sort.dir == 1, up: filter.sort.dir == -1 }\") {{ item.text }}\r\n        g-icon(name=\"ui/chevron\")\r\n.list\r\n    i-complex(v-for=\"complex in complexes\" :complex=\"complex\" :bedrooms=\"true\")\r\n    .empty(v-if=\"complexes.length == 0\") Результаты не найдены\r\n\r\n</template>\r\n<script>\r\nimport iComplex from 'components/complex'\r\nexport default {\r\n    props: {\r\n        complexes: Array\r\n    },\r\n    data: () => ({\r\n        sort: [\r\n            {\r\n                text: 'Сначала новые',\r\n                value: {\r\n                    key: 'created',\r\n                    dir: 1\r\n                }\r\n            },\r\n            {\r\n                text: 'Цене',\r\n                value: {\r\n                    key: 'price',\r\n                    dir: 1\r\n                }\r\n            },\r\n            {\r\n                text: 'Цене за метр',\r\n                value: {\r\n                    key: 'rate',\r\n                    dir: 1\r\n                }\r\n            }\r\n        ]\r\n    }),\r\n    methods: {\r\n        setSort(value) {\r\n            if (this.filter.sort.key == value.key)\r\n                this.filter.sort.dir = this.filter.sort.dir * -1\r\n            else\r\n                this.filter.sort = value\r\n            this.$store.dispatch('catalog/filter')\r\n        },\r\n    },\r\n    computed: {\r\n        filter() {\r\n            return this.$store.state.catalog.filter\r\n        }\r\n    },\r\n    components: { iComplex }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n\r\n.sort\r\n    width $desktop-width\r\n    margin 40px auto 0\r\n    display flex\r\n    +$tablet()\r\n        width $tablet-width\r\n        margin-top 25px\r\n    +$phone()\r\n        width 100%\r\n        padding 0 16px\r\n        justify-content space-between\r\n    .label\r\n        margin-right 20px\r\n        font-weight 500\r\n        +$phone()\r\n            display none\r\n    &-item\r\n        margin-right 15px\r\n        cursor pointer\r\n        display flex\r\n        align-items center\r\n        transition all .15s\r\n        +$phone()\r\n            margin-right 0\r\n            font-size 14px\r\n            &:last-child\r\n                margin-right 0\r\n        .icon\r\n            margin-left 3px\r\n            opacity 0\r\n            transition all .15s\r\n        &.active\r\n            color $primary\r\n            .icon\r\n                opacity 1\r\n            &.up\r\n                .icon\r\n                    transform rotate(180deg)\r\n\r\n.list\r\n    width $desktop-width\r\n    margin -10px auto 80px\r\n    display flex\r\n    flex-wrap wrap\r\n    +$tablet()\r\n        width $tablet-width\r\n        // margin-top -20px\r\n        margin-top -5px\r\n        margin-bottom 50px\r\n    +$phone()\r\n        width 100%\r\n        padding 0 16px\r\n    .empty\r\n        font-size 28px\r\n        font-weight 500\r\n        text-align center\r\n        margin-top 60px\r\n        align-self center\r\n        width 100%\r\n\r\n.complex\r\n    margin-top 40px\r\n    margin-right 24px\r\n    &:nth-child(3n+3)\r\n        margin-right 0\r\n    +$tablet()\r\n        margin-top 25px\r\n        &:nth-child(3n+3)\r\n            margin-right 24px\r\n        &:nth-child(2n)\r\n            margin-right 0\r\n    +$phone()\r\n        margin-right 0\r\n        &:nth-child(3n+3)\r\n            margin-right 0\r\n\r\n</style>\r\n","import { render } from \"./list.vue?vue&type=template&id=1fb3f7a8&scoped=true&lang=pug\"\nimport script from \"./list.vue?vue&type=script&lang=js\"\nexport * from \"./list.vue?vue&type=script&lang=js\"\n\nimport \"./list.vue?vue&type=style&index=0&id=1fb3f7a8&lang=stylus&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\gbotm\\\\OneDrive\\\\Документы\\\\Code\\\\work\\\\navi export\\\\client\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1fb3f7a8\"]])\n\nexport default __exports__","<template lang=\"pug\">\r\n\r\n.map-container\r\n    .list\r\n        i-complex(v-for=\"complex in rendered\" :key=\"complex.id\" :complex=\"complex\" :horizontal=\"true\" @click.prevent.stop=\"opened = complex.id\" @mouseover=\"hover = complex.id\" @mouseleave=\"hover = null\")\r\n        .empty(v-if=\"rendered.length == 0\") Результаты не найдены\r\n\r\n    GMapMap.map(:center=\"{lat: 51.093048, lng: 6.842120}\" :zoom=\"15\" ref=\"map\" :options=\"mapOptions\" @idle=\"redraw_complexes\")\r\n\r\n        GMapCluster.catalog-map-cluster(:zoomOnClick=\"true\" :styles=\"[{ width: 40, height: 40 }]\")\r\n\r\n            GMapMarker.catalog-map-marker2(v-for=\"complex in rendered\" :key=\"complex.id\" :position=\"complex.coordinates\" :optimized=\"false\" :label=\"{ text: `от ${parseInt(complex.min_price / 10**6)} млн`, className: hover === complex.id ? 'catalog-map-marker-active' : 'catalog-map-marker' }\" :icon=\"mapIcon\" @click=\"opened = complex.id\")\r\n\r\n                GMapInfoWindow.catalog-map-window(:opened=\"complex.id == opened\" :closeclick=\"false\")\r\n                    .catalog-map-window-inner\r\n                        .options\r\n                            g-favorite(:id=\"complex.id\" @click.stop=\"null\")\r\n                            //- .favorite\r\n                            //-     g-icon(name=\"ui/favorite\")\r\n                            .close(@click.stop.prevent=\"opened = null\")\r\n                                g-icon(name=\"ui/close\")\r\n                        .img(:style=\"{ backgroundImage: `url(${complex.image})` }\")\r\n                        .info\r\n                            .name {{ complex.name }}\r\n                            router-link.open(:to=\"{ name: 'complex', params: { id: complex.key } }\" target=\"_blank\") Посмотреть\r\n\r\n</template>\r\n<script>\r\nimport iComplex from 'components/complex'\r\nexport default {\r\n    props: {\r\n        complexes: Array\r\n    },\r\n    async mounted() {\r\n        this.rendered = this.complexes\r\n        const { maps: api } = await this.$gmapApiPromiseLazy()\r\n        const map = await this.$refs.map.$mapPromise\r\n        \r\n        this.api = api\r\n        this.map = map\r\n\r\n        await this.fitBounds()\r\n    },\r\n    data: () => ({\r\n        mapOptions: {\r\n            zoomControl: true,\r\n            mapTypeControl: false,\r\n            scaleControl: false,\r\n            streetViewControl: false,\r\n            rotateControl: false,\r\n            gestureHandling: 'greedy',\r\n            styles: [\r\n                {\r\n                    \"featureType\": \"all\",\r\n                    \"elementType\": \"geometry.fill\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"weight\": \"2.00\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"all\",\r\n                    \"elementType\": \"geometry.stroke\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"color\": \"#9c9c9c\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"all\",\r\n                    \"elementType\": \"labels.text\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"visibility\": \"on\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"landscape\",\r\n                    \"elementType\": \"all\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"color\": \"#f2f2f2\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"landscape\",\r\n                    \"elementType\": \"geometry.fill\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"color\": \"#ffffff\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"landscape.man_made\",\r\n                    \"elementType\": \"geometry.fill\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"color\": \"#ffffff\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"poi\",\r\n                    \"elementType\": \"all\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"visibility\": \"off\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"road\",\r\n                    \"elementType\": \"all\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"saturation\": -100\r\n                        },\r\n                        {\r\n                            \"lightness\": 45\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"road\",\r\n                    \"elementType\": \"geometry.fill\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"color\": \"#eeeeee\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"road\",\r\n                    \"elementType\": \"labels.text.fill\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"color\": \"#7b7b7b\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"road\",\r\n                    \"elementType\": \"labels.text.stroke\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"color\": \"#ffffff\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"road.highway\",\r\n                    \"elementType\": \"all\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"visibility\": \"simplified\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"road.arterial\",\r\n                    \"elementType\": \"labels.icon\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"visibility\": \"off\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"transit\",\r\n                    \"elementType\": \"all\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"visibility\": \"off\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"water\",\r\n                    \"elementType\": \"all\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"color\": \"#46bcec\"\r\n                        },\r\n                        {\r\n                            \"visibility\": \"on\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"water\",\r\n                    \"elementType\": \"geometry.fill\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"color\": \"#c8d7d4\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"water\",\r\n                    \"elementType\": \"labels.text.fill\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"color\": \"#070707\"\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    \"featureType\": \"water\",\r\n                    \"elementType\": \"labels.text.stroke\",\r\n                    \"stylers\": [\r\n                        {\r\n                            \"color\": \"#ffffff\"\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        },\r\n        mapIcon: {\r\n            url: require('@/assets/icons/ui/empty.svg'),\r\n            scaledSize: {width: 100, height: 40},\r\n            labelOrigin: {x: 50, y: 0}\r\n        },\r\n        clusterOptions: {\r\n            clusterClass: 'catalog-map-cluster'\r\n        },\r\n        api: null,\r\n        map: null,\r\n        opened: null,\r\n        rendered: [],\r\n        hover: null\r\n    }),\r\n    watch: {\r\n        complexes() {\r\n            this.rendered = this.complexes\r\n            this.fitBounds()\r\n        }\r\n    },\r\n    methods: {\r\n        async fitBounds() {\r\n            if (!this.api || !this.map) return\r\n\r\n            const bounds = new this.api.LatLngBounds()\r\n            \r\n            for (let complex of this.rendered)\r\n                bounds.extend(new this.api.LatLng(complex.coordinates.lat, complex.coordinates.lng))\r\n\r\n            await this.map.fitBounds(bounds)\r\n            if (this.map.getZoom() > 12)\r\n                this.map.setZoom(12)\r\n        },\r\n        redraw_complexes() {\r\n            let bounds = this.map.getBounds()\r\n            console.log('REDRAW')\r\n            this.rendered = this.complexes.filter(complex => {\r\n                let lat = complex.coordinates.lat,\r\n                    lng = complex.coordinates.lng\r\n\r\n                return lng > bounds.Qa.h && lng < bounds.Qa.j && lat > bounds.ub.h && lat < bounds.ub.j\r\n            })\r\n        }\r\n    },\r\n    components: { iComplex }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n\r\n.map-container\r\n    padding 20px\r\n    padding-right 0\r\n    position relative\r\n    display flex\r\n    margin-bottom 120px\r\n    height calc(100vh - 80px)\r\n    +$tablet()\r\n        padding 0 0 20px\r\n        height auto\r\n    +$phone()\r\n        padding-bottom 0\r\n        margin-bottom 0\r\n        height calc(100vh - 180px)\r\n\r\n.list\r\n    width 372px\r\n    height 100%\r\n    overflow-y auto\r\n    flex-shrink 0\r\n    margin-right 20px\r\n    position relative\r\n    +$tablet()\r\n        display none\r\n    &:deep()\r\n        .complex.horizontal\r\n            width 100%\r\n            margin-top 20px\r\n            &:first-child\r\n                margin-top 0\r\n    .empty\r\n        font-size 24px\r\n        font-weight 500\r\n        text-align center\r\n        padding-top 20px\r\n\r\n.map\r\n    width 100%\r\n    height 100%\r\n    // height 800px\r\n    +$tablet()\r\n        height calc(100vh - 300px)\r\n    +$phone()\r\n        height 100%\r\n    &:deep()\r\n        .gm-style-iw-d\r\n            max-height none!important\r\n            overflow hidden\r\n        .gm-style-iw\r\n            padding 0\r\n        .cluster\r\n            background-color $secondary\r\n            box-shadow 1px 3px 5px 0 rgba(#000, .15)\r\n            border-radius 100%\r\n            position absolute\r\n            width 40px!important\r\n            height 40px!important\r\n            img\r\n                display none\r\n            span\r\n                color #fff\r\n                font-family $main-font\r\n                font-weight 500\r\n                font-size 20px\r\n                line-height 40px\r\n        .catalog-map-cluster\r\n            background-color red\r\n            display none\r\n        .catalog-map-marker, .catalog-map-marker-active\r\n            background-color $secondary\r\n            cursor pointer\r\n            font-size 13px!important\r\n            font-weight 500\r\n            padding 3px 10px!important\r\n            border-radius 10px\r\n            color #fff!important\r\n            transform translateY(50%)  scale(1)\r\n            font-family $main-font\r\n            transition transform .2s, background-color .2s\r\n        .catalog-map-marker-active\r\n            transform translateY(50%) scale(1.2)\r\n            background-color lighten(#28709E, 5)\r\n        .catalog-map-window\r\n            width 180px\r\n            font-family $main-font\r\n            position relative\r\n            box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.15)\r\n            .img\r\n                height 100px\r\n                width 100%\r\n                background-size cover\r\n            .name\r\n                font-size 14px\r\n                line-height 18px\r\n            .info\r\n                padding 8px\r\n                display flex\r\n                flex-direction column\r\n            .options\r\n                position absolute\r\n                z-index 10\r\n                top 5px\r\n                right 5px\r\n                display flex\r\n                color #fff\r\n                .g-favorite\r\n                    margin-right 7px\r\n                    font-size 23px\r\n                    display flex\r\n                .close\r\n                    font-size 23px\r\n                    display flex\r\n                    cursor pointer\r\n            .open\r\n                $btn('secondary')\r\n                margin-top 5px\r\n                font-size 14px\r\n                padding 5px 10px\r\n                width auto\r\n                // display inline-flex\r\n                align-self stretch\r\n\r\n\r\n</style>\r\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import { render } from \"./map.vue?vue&type=template&id=03c79823&scoped=true&lang=pug\"\nimport script from \"./map.vue?vue&type=script&lang=js\"\nexport * from \"./map.vue?vue&type=script&lang=js\"\n\nimport \"./map.vue?vue&type=style&index=0&id=03c79823&lang=stylus&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\gbotm\\\\OneDrive\\\\Документы\\\\Code\\\\work\\\\navi export\\\\client\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-03c79823\"]])\n\nexport default __exports__","import { render } from \"./index.vue?vue&type=template&id=a37d0eb4&scoped=true&lang=pug\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=a37d0eb4&lang=stylus&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\gbotm\\\\OneDrive\\\\Документы\\\\Code\\\\work\\\\navi export\\\\client\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a37d0eb4\"]])\n\nexport default __exports__"],"sourceRoot":""}